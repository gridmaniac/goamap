{"version":3,"sources":["node_modules/browser-pack/_prelude.js","ui/src/js/adcat-picker.js","ui/src/js/adcats.js","ui/src/js/ads.js","ui/src/js/album-picker.js","ui/src/js/albums.js","ui/src/js/app.js","ui/src/js/article-picker.js","ui/src/js/articles.js","ui/src/js/batch.js","ui/src/js/checkbox.js","ui/src/js/guides.js","ui/src/js/map.js","ui/src/js/notifications.js","ui/src/js/photo-picker.js","ui/src/js/photo-selector.js","ui/src/js/photos.js","ui/src/js/place-picker.js","ui/src/js/places.js","ui/src/js/placetag-picker.js","ui/src/js/placetags.js","ui/src/js/upload.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","on","focus","this","val","getJSON","data","empty","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","adcat","value","append","_id","title","err","return","off","click","_this","modal","ids","not","each","push","swal","type","showCancelButton","then","post","to","location","reload","album","document","ready","article","html","summernote","callbacks","onChange","contents","insertAfter","awesomplete","Awesomplete","minChars","autoFirst","maxItems","list","map","x","change","prop","checkbox","trigger","reader","FileReader","onload","dataUri","target","result","attr","files","size","readAsDataURL","guides","items","guide","item","id","content","parent","parent_id","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","filter","children","duplicate","_iterator2","json","nestable","callback","closest","hide","show","place","lat","lng","google","maps","Map","getElementById","zoom","center","marker","Marker","position","icon","event","addListener","latLng","setPosition","notify","message","timer","photo","photos","split","join","hold","setInterval","alert","clearInterval","promises","file","Promise","resolve","name","placetag","reduce","p","batch","Math","floor","random","progress","coef","percent","stop","animate","width","showProgress"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","$('#adcat-picker').on('shown.bs.modal', () => {\r\n    $('#adcat-search').focus()\r\n})\r\n\r\n$('#adcat-search').on('keyup', function() {\r\n    if ($(this).val().length > 0) {\r\n        $.getJSON('/adcats/search/' + $(this).val(), function(data) {\r\n            $('#adcats').empty()\r\n\r\n            if (data.length > 0) {\r\n                for (let adcat of data) {\r\n                    $('#adcats').append(`<tr><td><i class=\"fa fa-archive text-success\"></i></td><td><a class=\"adcat-pick\" data-id=\"${adcat._id}\" href=\"#\">${adcat.title}</a></td></tr>`)\r\n                }\r\n\r\n                $('.adcat-pick').off('click').click(function() {\r\n                    $('#adcat-picker').modal('hide')\r\n                \r\n                    let ids = []\r\n                    \r\n                    $('.checkbox input:checked').not('#check-all').each(function() {\r\n                        ids.push($(this).val())\r\n                    })\r\n                \r\n                    swal({\r\n                        title: 'Вы уверены?',\r\n                        type: 'warning',\r\n                        showCancelButton: true,\r\n                    }).then(() => {\r\n                        $.post('/ads/move', { data: ids, to: $(this).data('id') }, () => {\r\n                            location.reload()\r\n                        })\r\n                    })\r\n                })\r\n\r\n            } else {\r\n                $('#adcats').append(`<tr><td></td><td>Нет результатов</td></tr>`)\r\n            }\r\n        })\r\n    }\r\n})\r\n\r\n","$('.adcat-remove').on('mousedown touchend', function() {\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        location = '/adcats/remove/' + $(this).data('id')\r\n    })\r\n})\r\n\r\n$('#adcat-remove-checked').click(() => {\r\n    let ids = []\r\n    \r\n    $('.checkbox input:checked').not('#check-all').each(function() {\r\n        ids.push($(this).val())\r\n    })\r\n\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        $.post('/adcats/remove', { data: ids }, () => {\r\n            location.reload()\r\n        })\r\n    })\r\n})","$('.ad-remove').on('mousedown touchend', function() {\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        location = '/ads/remove/' + $(this).data('id')\r\n    })\r\n})\r\n\r\n$('#ad-remove-checked').click(() => {\r\n    let ids = []\r\n    \r\n    $('.checkbox input:checked').not('#check-all').each(function() {\r\n        ids.push($(this).val())\r\n    })\r\n\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        $.post('/ads/remove', { data: ids }, () => {\r\n            location.reload()\r\n        })\r\n    })\r\n})\r\n","$('#album-picker').on('shown.bs.modal', () => {\r\n    $('#album-search').focus()\r\n})\r\n\r\n$('#album-search').on('keyup', function() {\r\n    if ($(this).val().length > 0) {\r\n        $.getJSON('/albums/search/' + $(this).val(), function(data) {\r\n            $('#albums').empty()\r\n\r\n            if (data.length > 0) {\r\n                for (let album of data) {\r\n                    $('#albums').append(`<tr><td><i class=\"fa fa-folder text-warning\"></i></td><td><a class=\"album-pick\" data-id=\"${album._id}\" href=\"#\">${album.title}</a></td></tr>`)\r\n                }\r\n\r\n                $('.album-pick').off('click').click(function() {\r\n                    $('#album-picker').modal('hide')\r\n                \r\n                    let ids = []\r\n                    \r\n                    $('.checkbox input:checked').not('#check-all').each(function() {\r\n                        ids.push($(this).val())\r\n                    })\r\n                \r\n                    swal({\r\n                        title: 'Вы уверены?',\r\n                        type: 'warning',\r\n                        showCancelButton: true,\r\n                    }).then(() => {\r\n                        $.post('/photos/move', { data: ids, to: $(this).data('id') }, () => {\r\n                            location.reload()\r\n                        })\r\n                    })\r\n                })\r\n\r\n            } else {\r\n                $('#albums').append(`<tr><td></td><td>Нет результатов</td></tr>`)\r\n            }\r\n        })\r\n    }\r\n})\r\n\r\n","$('.album-remove').on('mousedown touchend', function() {\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        location = '/albums/remove/' + $(this).data('id')\r\n    })\r\n})\r\n\r\n$('#album-remove-checked').click(() => {\r\n    let ids = []\r\n    \r\n    $('.checkbox input:checked').not('#check-all').each(function() {\r\n        ids.push($(this).val())\r\n    })\r\n\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        $.post('/albums/remove', { data: ids }, () => {\r\n            location.reload()\r\n        })\r\n    })\r\n})","$(document).ready(function() {\r\n    require('./notifications')\r\n    require('./checkbox')\r\n    require('./guides')\r\n    require('./articles')\r\n    require('./albums')\r\n    require('./photos')\r\n    require('./upload')\r\n    require('./album-picker')\r\n    require('./placetags')\r\n    require('./placetag-picker')\r\n    require('./places')\r\n    require('./map')\r\n    require('./photo-picker')\r\n    require('./adcats')\r\n    require('./adcat-picker')\r\n    require('./ads')\r\n    require('./batch')\r\n    require('./article-picker')\r\n    require('./place-picker')\r\n    require('./photo-selector')\r\n})\r\n","$('#article-picker').on('shown.bs.modal', () => {\r\n    $('#article-search').focus()\r\n})\r\n\r\n$('#article-search').on('keyup', function() {\r\n    if ($(this).val().length > 0) {\r\n        $.getJSON('/articles/search/' + $(this).val(), function(data) {\r\n            $('#articles').empty()\r\n\r\n            if (data.length > 0) {\r\n                for (let article of data) {\r\n                    $('#articles').append(`<tr><td><a class=\"article-pick\" data-id=\"${article._id}\" data-title=\"${article.title}\" href=\"#\">${article.title}</a></td></tr>`)\r\n                }\r\n\r\n                $('.article-pick').off('click').click(function() {\r\n                    $('#article-picker').modal('hide')\r\n                \r\n                    $('#select-article a').html($(this).data('title'))\r\n                    $('#resource').val($(this).data('id'))\r\n                })\r\n\r\n            } else {\r\n                $('#articles').append(`<tr><td>Нет результатов</td></tr>`)\r\n            }\r\n        })\r\n    }\r\n})","$('.article-remove').on('mousedown touchend', function() {\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        location = '/articles/remove/' + $(this).data('id')\r\n    })\r\n})\r\n\r\n$('#article-remove-checked').click(() => {\r\n    let ids = []\r\n    \r\n    $('.checkbox input:checked').not('#check-all').each(function() {\r\n        ids.push($(this).val())\r\n    })\r\n\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        $.post('/articles/remove', { data: ids }, () => {\r\n            location.reload()\r\n        })\r\n    })\r\n})\r\n\r\n$('.summernote').summernote({\r\n    callbacks: {\r\n        onChange: (contents) => {\r\n            $('#content').val(contents)\r\n        }\r\n    }\r\n})\r\n\r\n$('.summernote').summernote('code', $('#content').val())\r\n\r\n$('<br><a href=\"#\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#photo-selector\">Выбрать</a>').insertAfter('.note-group-image-url')","$('[name=\"album\"]').each(function() {\r\n    const awesomplete = new Awesomplete(this, {\r\n        minChars: 2,\r\n        autoFirst: true,\r\n        maxItems: 10\r\n    })\r\n\r\n    $(this).on('input', function() {\r\n        $.getJSON('/albums/search/' + $(this).val(), (data) => {\r\n            awesomplete.list = data.map(x => x.title)\r\n        })\r\n    })\r\n})\r\n\r\n$('[name=\"placetag\"]').each(function() {\r\n    const awesomplete = new Awesomplete(this, {\r\n        minChars: 2,\r\n        autoFirst: true,\r\n        maxItems: 10\r\n    })\r\n\r\n    $(this).on('input', function() {\r\n        $.getJSON('/placetags/search/' + $(this).val(), (data) => {\r\n            awesomplete.list = data.map(x => x.title)\r\n        })\r\n    })\r\n})\r\n\r\n$('[name=\"place\"]').each(function() {\r\n    const awesomplete = new Awesomplete(this, {\r\n        minChars: 2,\r\n        autoFirst: true,\r\n        maxItems: 10\r\n    })\r\n\r\n    $(this).on('input', function() {\r\n        $.getJSON('/places/search/' + $(this).val(), (data) => {\r\n            awesomplete.list = data.map(x => x.title)\r\n        })\r\n    })\r\n})","$('#check-all').change(function() {\r\n    if ($(this).prop('checked'))\r\n        $('[type=\"checkbox\"]').not(this).checkbox('check')\r\n    else\r\n        $('[type=\"checkbox\"]').not(this).checkbox('uncheck')\r\n})\r\n","$('#guide-icon').click(function() {\r\n    $('#guide-file').trigger('click')\r\n})\r\n\r\n$('#guide-file').on('change', function () {\r\n    const reader  = new FileReader()\r\n\r\n    reader.onload = (e) => {\r\n        var dataUri = e.target.result\r\n        \r\n        $('input[name=\"icon\"]').val(dataUri)\r\n        $('#guide-img').attr('src', dataUri)\r\n    }\r\n\r\n    const files = $('#guide-file')[0].files;\r\n    if (files[0].size < 64000) {\r\n        reader.readAsDataURL($('#guide-file')[0].files[0])\r\n        swal(\r\n            'Успешно!',\r\n            'Иконка обновлена. Требуется сохранение.',\r\n            'success'\r\n        )\r\n    } else {\r\n        swal(\r\n            'Ошибка!',\r\n            'Размер иконки должен быть не более 64 КБ.',\r\n            'error'\r\n        )\r\n    }\r\n})\r\n\r\nif ($('.dd').length > 0) {\r\n    $.getJSON('/guides/json', function(guides) {\r\n        let items = []\r\n        for (let guide of guides) {\r\n            const item = {\r\n                id: guide._id,\r\n                content: `${guide.title}\r\n                <span class=\"pull-right guide-remove fa fa-trash-o text-danger\"></span>\r\n                <span class=\"pull-right guide-open fa fa-pencil-square-o text-success\"></span>`\r\n            }\r\n            \r\n            if (guide.parent) {\r\n                item.parent_id = guide.parent\r\n            }\r\n\r\n            items.push(item)\r\n        }\r\n\r\n        for (let item of items) {\r\n            if (item.parent_id) {\r\n                let parent =\r\n                    items.filter(x => item.parent_id == x.id)[0]\r\n                \r\n                if (parent) {\r\n                    if (!parent.children)\r\n                        parent.children = []\r\n\r\n                    parent.children.push(item)\r\n                    item.duplicate = true\r\n                }\r\n            }\r\n        }\r\n\r\n        const json = items.filter(x => {\r\n            return !x.duplicate\r\n        })\r\n\r\n        $('.dd').nestable({\r\n            json,\r\n            callback: l => {\r\n                $.post('/guides/reorder', { data: l.nestable('toArray') })\r\n            }\r\n        })\r\n\r\n        $('.guide-open').on('mousedown touchend', function() {\r\n            location = '/guides/' + $(this).closest('li').data('id')\r\n        })\r\n\r\n        $('.guide-remove').on('mousedown touchend', function() {\r\n            swal({\r\n                title: 'Вы уверены?',\r\n                type: 'warning',\r\n                showCancelButton: true,\r\n            }).then(() => {\r\n                location = '/guides/remove/' + $(this).closest('li').data('id')\r\n            })\r\n        })\r\n    })\r\n}\r\n\r\n$('[name=\"guides\"]').change(function() {\r\n    $('.resource').hide()\r\n\r\n    switch($(this).val()) {\r\n        case 'article':\r\n            $('#select-article').show()\r\n            break\r\n        case 'place':\r\n            $('#select-place').show()\r\n            break\r\n        case 'hyperlink':\r\n            $('#hyperlink').show()\r\n            break\r\n    }\r\n})\r\n\r\n$('#set-hyperlink').on('input', function() {\r\n    $('#resource').val($(this).val())\r\n})","\r\nif ($('#map').length > 0) {\r\n    const place = {\r\n        lat: +$('#latitude').val(),\r\n        lng: +$('#longitude').val()\r\n    }\r\n    \r\n    const map = new google.maps.Map(document.getElementById('map'), {\r\n        zoom: $('#map').data('zoom'),\r\n        center: place\r\n    })\r\n    \r\n    const marker = new google.maps.Marker({\r\n        position: place,\r\n        map: map,\r\n        icon: $('#map').data('icon')\r\n    })\r\n    \r\n    google.maps.event.addListener(map, 'click', (event) => {\r\n        $('#latitude').val(event.latLng.lat())\r\n        $('#longitude').val(event.latLng.lng())\r\n                    \r\n        marker.setPosition(event.latLng)\r\n    })\r\n}\r\n","if ($('#notification').html()) {\r\n    $.notify({\r\n        icon: 'pe-7s-bell',\r\n        message: $('#notification').html()\r\n    },\r\n    {\r\n        type: $('#notification-type').html(),\r\n        timer: 4000\r\n    })\r\n}","$('#photo-picker').on('shown.bs.modal', () => {\r\n    $('#photo-search').focus()\r\n})\r\n\r\n$('#photo-search').on('keyup', function() {\r\n    if ($(this).val().length > 0) {\r\n        $.getJSON('/photos/search/' + $(this).val(), function(data) {\r\n            $('#photos').empty()\r\n\r\n            if (data.length > 0) {\r\n                for (let photo of data) {\r\n                    $('#photos').append(`<tr><td><div class=\"img-container\"><a data-fancybox=\"gallery\" href=\"/photo/${photo._id}\"><img src=\"/photo/${photo._id}\"></a></div></td><td><a class=\"photo-pick\" data-id=\"${photo._id}\" href=\"#\">${photo.title}</a></td></tr>`)\r\n                }\r\n\r\n                $('.photo-pick').off('click').click(function() {\r\n                    $('#photo-picker').modal('hide')\r\n\r\n                    const id = $(this).data('id')\r\n                \r\n                    let photos = $('[name=\"photos\"]').val().split(',')\r\n                    photos.push(id)\r\n\r\n                    $('[name=\"photos\"]').val(photos.filter(x => x).join(','))\r\n                    \r\n                    $('#photos-container').append(`\r\n                        <a class=\"photo\" data-id=\"${id}\" data-fancybox=\"gallery\" href=\"/photo/${id}\">\r\n                            <img src=\"/photo/${id}\">\r\n                        </a>\r\n                    `)\r\n                })\r\n\r\n            } else {\r\n                $('#photos').append(`<tr><td></td><td>Нет результатов</td></tr>`)\r\n            }\r\n        })\r\n    }\r\n})\r\n\r\n","$('#photo-selector').on('shown.bs.modal', () => {\r\n    $('#photo-search').focus()\r\n})\r\n\r\n$('#photo-search').on('keyup', function() {\r\n    if ($(this).val().length > 0) {\r\n        $.getJSON('/photos/search/' + $(this).val(), function(data) {\r\n            $('#photos').empty()\r\n\r\n            if (data.length > 0) {\r\n                for (let photo of data) {\r\n                    $('#photos').append(`<tr><td><div class=\"img-container\"><a data-fancybox=\"gallery\" href=\"/photo/${photo._id}\"><img src=\"/photo/${photo._id}\"></a></div></td><td><a class=\"photo-pick\" data-id=\"${photo._id}\" href=\"#\">${photo.title}</a></td></tr>`)\r\n                }\r\n\r\n                $('.photo-pick').off('click').click(function() {\r\n                    $('#photo-selector').modal('hide')\r\n\r\n                    const id = $(this).data('id')\r\n                \r\n                    $('.note-image-url').val('/photo/' + id)\r\n                })\r\n\r\n            } else {\r\n                $('#photos').append(`<tr><td></td><td>Нет результатов</td></tr>`)\r\n            }\r\n        })\r\n    }\r\n})\r\n\r\n","$('.photo-remove').on('mousedown touchend', function() {\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        location = '/photos/remove/' + $(this).data('id')\r\n    })\r\n})\r\n\r\n$('#photo-remove-checked').click(() => {\r\n    let ids = []\r\n    \r\n    $('.checkbox input:checked').not('#check-all').each(function() {\r\n        ids.push($(this).val())\r\n    })\r\n\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        $.post('/photos/remove', { data: ids }, () => {\r\n            location.reload()\r\n        })\r\n    })\r\n})\r\n\r\n$('#update-photo').on('change', function () {\r\n    const reader  = new FileReader()\r\n\r\n    reader.onload = (e) => {\r\n        var dataUri = e.target.result\r\n        \r\n        $('#preview').val(dataUri)\r\n        $('.image-preview img').attr('src', dataUri)\r\n        $('.image-preview a').attr('href', dataUri)\r\n    }\r\n\r\n    const files = $('#update-photo')[0].files;\r\n    reader.readAsDataURL($('#update-photo')[0].files[0])\r\n})","$('#place-picker').on('shown.bs.modal', () => {\r\n    $('#place-search').focus()\r\n})\r\n\r\n$('#place-search').on('keyup', function() {\r\n    if ($(this).val().length > 0) {\r\n        $.getJSON('/places/search/' + $(this).val(), function(data) {\r\n            $('#places').empty()\r\n\r\n            if (data.length > 0) {\r\n                for (let place of data) {\r\n                    $('#places').append(`<tr><td><a class=\"place-pick\" data-id=\"${place._id}\" data-title=\"${place.title}\" href=\"#\">${place.title}</a></td></tr>`)\r\n                }\r\n\r\n                $('.place-pick').off('click').click(function() {\r\n                    $('#place-picker').modal('hide')\r\n                \r\n                    $('#select-place a').html($(this).data('title'))\r\n                    $('#resource').val($(this).data('id'))\r\n                })\r\n\r\n            } else {\r\n                $('#places').append(`<tr><td>Нет результатов</td></tr>`)\r\n            }\r\n        })\r\n    }\r\n})\r\n","$('.place-remove').on('mousedown touchend', function() {\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        location = '/places/remove/' + $(this).data('id')\r\n    })\r\n})\r\n\r\n$('#place-remove-checked').click(() => {\r\n    let ids = []\r\n    \r\n    $('.checkbox input:checked').not('#check-all').each(function() {\r\n        ids.push($(this).val())\r\n    })\r\n\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        $.post('/places/remove', { data: ids }, () => {\r\n            location.reload()\r\n        })\r\n    })\r\n})\r\n\r\nlet hold = null\r\n\r\n$('.photo').on('mousedown', function() {\r\n    const id = $(this).data('id')\r\n    hold = setInterval(() => {\r\n        \r\n        swal({\r\n            title: 'Вы уверены?',\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n        }).then(() => {\r\n            /*$.post('/places/remove', { data: ids }, () => {\r\n                location.reload()\r\n            })*/\r\n\r\n            alert(id)\r\n        })\r\n\r\n        clearInterval(hold)\r\n    }, 700)\r\n})\r\n\r\n$('.photo').on('mouseup', () => {\r\n    clearInterval(hold)\r\n})\r\n\r\n$('#upload-photos').click(function() {\r\n    $('#photo-files').trigger('click')\r\n})\r\n\r\n$('#photo-files').on('change', function () {\r\n    const files = $('#photo-files')[0].files\r\n    if (files.length > 10) {\r\n        swal(\r\n            'Ошибка!',\r\n            'Одновременно можно загружать до 10 файлов',\r\n            'error'\r\n        )\r\n\r\n        $('#photo-files').val('')\r\n    } else if (!$('[name=\"title\"]').val()) {\r\n        swal(\r\n            'Ошибка!',\r\n            'Укажите название места',\r\n            'error'\r\n        )\r\n        \r\n        $('#photo-files').val('')\r\n    } else {\r\n        let promises = []\r\n\r\n        for (let file of files) {\r\n            promises.push(() => new Promise((resolve) => {\r\n                let photo = {\r\n                    name: file.name\r\n                }\r\n\r\n                const reader = new FileReader()\r\n                reader.onload = (e) => {\r\n                    photo.content = e.target.result\r\n                    photo.placetag = $('#photos-container').data('placetag')\r\n                    photo.title = $('[name=\"title\"]').val()\r\n                    \r\n                    $.post('/photos/push', { data: photo }, (data) => {\r\n                        let photos = $('[name=\"photos\"]').val().split(',')\r\n                        photos.push(data)\r\n\r\n                        $('[name=\"photos\"]').val(photos.filter(x => x).join(','))\r\n                       \r\n                        $('#photos-container').append(`\r\n                            <a class=\"photo\" data-id=\"${data}\" data-fancybox=\"gallery\" href=\"/photo/${data}\">\r\n                                <img src=\"/photo/${data}\">\r\n                            </a>\r\n                        `)\r\n                        resolve()\r\n                    })\r\n                }\r\n\r\n                reader.readAsDataURL(file)\r\n            }))\r\n        }\r\n\r\n        promises.reduce((p, x) => p.then(x), Promise.resolve()).then(() => {\r\n            swal(\r\n                'Успешно!',\r\n                'Фотографии добавлены. Требуется сохранение.',\r\n                'success'\r\n            )\r\n        })\r\n    }\r\n})\r\n","$('#placetag-picker').on('shown.bs.modal', () => {\r\n    $('#placetag-search').focus()\r\n})\r\n\r\n$('#placetag-search').on('keyup', function() {\r\n    if ($(this).val().length > 0) {\r\n        $.getJSON('/placetags/search/' + $(this).val(), function(data) {\r\n            $('#placetags').empty()\r\n\r\n            if (data.length > 0) {\r\n                for (let placetag of data) {\r\n                    $('#placetags').append(`<tr><td><i class=\"fa fa-folder text-warning\"></i></td><td><a class=\"placetag-pick\" data-id=\"${placetag._id}\" href=\"#\">${placetag.title}</a></td></tr>`)\r\n                }\r\n\r\n                $('.placetag-pick').off('click').click(function() {\r\n                    $('#placetag-picker').modal('hide')\r\n                \r\n                    let ids = []\r\n                    \r\n                    $('.checkbox input:checked').not('#check-all').each(function() {\r\n                        ids.push($(this).val())\r\n                    })\r\n                \r\n                    swal({\r\n                        title: 'Вы уверены?',\r\n                        type: 'warning',\r\n                        showCancelButton: true,\r\n                    }).then(() => {\r\n                        $.post('/places/move', { data: ids, to: $(this).data('id') }, () => {\r\n                            location.reload()\r\n                        })\r\n                    })\r\n                })\r\n\r\n            } else {\r\n                $('#placetags').append(`<tr><td></td><td>Нет результатов</td></tr>`)\r\n            }\r\n        })\r\n    }\r\n})\r\n\r\n","$('#placetag-icon').click(function() {\r\n    $('#placetag-file').trigger('click')\r\n})\r\n\r\n$('#placetag-file').on('change', function () {\r\n    const reader  = new FileReader()\r\n\r\n    reader.onload = (e) => {\r\n        var dataUri = e.target.result\r\n        \r\n        $('input[name=\"icon\"]').val(dataUri)\r\n        $('#placetag-img').attr('src', dataUri)\r\n    }\r\n\r\n    const files = $('#placetag-file')[0].files;\r\n    if (files[0].size < 64000) {\r\n        reader.readAsDataURL($('#placetag-file')[0].files[0])\r\n        swal(\r\n            'Успешно!',\r\n            'Иконка обновлена. Требуется сохранение.',\r\n            'success'\r\n        )\r\n    } else {\r\n        swal(\r\n            'Ошибка!',\r\n            'Размер иконки должен быть не более 64 КБ.',\r\n            'error'\r\n        )\r\n    }\r\n})\r\n\r\n$('.placetag-remove').on('mousedown touchend', function() {\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        location = '/placetags/remove/' + $(this).data('id')\r\n    })\r\n})\r\n\r\n$('#placetag-remove-checked').click(() => {\r\n    let ids = []\r\n    \r\n    $('.checkbox input:checked').not('#check-all').each(function() {\r\n        ids.push($(this).val())\r\n    })\r\n\r\n    swal({\r\n        title: 'Вы уверены?',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n    }).then(() => {\r\n        $.post('/placetags/remove', { data: ids }, () => {\r\n            location.reload()\r\n        })\r\n    })\r\n})","const batch = Math.floor(Math.random() * (9999999 - 1000000) + 1000000)\r\n\r\n$('#guide-file').on('change', function () {\r\n    const reader  = new FileReader()\r\n\r\n    reader.onload = (e) => {\r\n        var dataUri = e.target.result\r\n        \r\n        $('input[name=\"icon\"]').val(dataUri)\r\n        $('#guide-img').attr('src' ,dataUri)\r\n    }\r\n\r\n    const files = $('#guide-file')[0].files;\r\n    if (files[0].size < 64000) {\r\n        reader.readAsDataURL($('#guide-file')[0].files[0])\r\n        swal(\r\n            'Успешно!',\r\n            'Иконка обновлена. Требуется сохранение.',\r\n            'success'\r\n        )\r\n    } else {\r\n        swal(\r\n            'Ошибка!',\r\n            'Размер иконки должен быть не более 64 КБ.',\r\n            'error'\r\n        )\r\n    }\r\n})\r\n\r\n$('#upload-start').click(() => {\r\n    const files = $('[name=\"photos\"]')[0].files\r\n    if (files.length > 50) {\r\n        swal(\r\n            'Ошибка!',\r\n            'Одновременно можно загружать до 50 файлов',\r\n            'error'\r\n        )\r\n    } else {\r\n        let promises = [],\r\n            progress = 0\r\n\r\n        const showProgress = () => {\r\n            progress++\r\n\r\n            const coef = 100 / promises.length,\r\n                  percent = progress * coef\r\n\r\n            $('#progress').stop().animate({\r\n                width: percent + '%'\r\n            }, 300)\r\n        }\r\n\r\n        $('#upload-start').hide()\r\n        $('#upload-start-fake').show()\r\n\r\n        for (let file of files) {\r\n            promises.push(() => new Promise((resolve) => {\r\n                let photo = {\r\n                    name: file.name\r\n                }\r\n\r\n                const reader = new FileReader()\r\n                reader.onload = (e) => {\r\n                    photo.content = e.target.result\r\n                    photo.album = $('#album').val()\r\n\r\n                    if ($('#batch-flag').prop('checked')) {\r\n                        photo.batch = batch\r\n                    }\r\n\r\n                    $.post('/photos', { data: photo }, () => {\r\n                        showProgress()\r\n                        resolve()\r\n                    })\r\n                }\r\n    \r\n                reader.readAsDataURL(file)\r\n            }))\r\n        }\r\n        \r\n        promises.reduce((p, x) => p.then(x), Promise.resolve()).then(() => {\r\n            if ($('#batch-flag').prop('checked')) {\r\n                location = '/batch/' + batch\r\n            } else {\r\n                location.reload()\r\n            }\r\n        })\r\n    }\r\n})"]}